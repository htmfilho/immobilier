{% extends "layout.html" %}
{% block breadcrumb %}
  <li class="active">Liste des personnes</li>
{% endblock %}
{% block content %}
<div class="panel panel-default">
  <div class="panel-body">
      <div class="row">
          <div class="col-md-8">
              <div class="panel panel-info">
                  <div class="panel-heading">Filtre</div>
                  <div class="panel-body">
                      <form  method="get" action="{% url 'personne_search'%}" >
                          <div class="row">
                              <div class="col-md-4">
                                  <label for="nom">Nom</label>
                                  <input class="form-control" name="nom" value="{{ nom | default_if_none:'' }}" style="text-transform:uppercase" id="nom">
                              </div>
                              <div class="col-md-4">
                                  <label for="prenom">Prénom</label>
                                  <input class="form-control" name="prenom" value="{{ prenom | default_if_none:'' }}" style="text-transform:uppercase" id="prenom">
                              </div>
                              <div class="col-md-4">
                                  <label class="invisible">&nbsp;</label>
                                  <div class="btnbtn-as-block"><input type="submit" value="OK" name="btn">
                                      <input type="button" value="Clean" name="btn" id="btn_clean_personnes" style="visibility:hidden;display:none;" ></div>
                              </div>
                          </div>
                      </form>
                  </div>
              </div>
          </div>
          <div class="col-md-4">
              <p align="right">
                  <a href="{% url 'personne-create' %}" title="Pour ajouter une nouvelle personne"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></a>
              </p>
          </div>
      </div>

      <br>
      <table class="table table-striped table-hover display"
             id="tbl_data">
          <thead>
          <tr>
              <th>Nom</th>
              <th>Prénom</th>
              <th>Type</th>
              <th>Email</th>
              <th>Gsm</th>
              <th>Téléphone</th>
              <th>Profession</th>
              <th>Société</th>
              <th></th>
          </tr>
          </thead>
          <tbody>
      {% for personne in personnes %}
          <tr>
              <td>
                  <a href="{% url 'personne-edit' personne.id %}" title="Pour modifier une personne">{{ personne.nom }}</a>
              </td>
              <td>
                  <a href="{% url 'personne-edit' personne.id %}" title="Pour modifier une personne">{{ personne.prenom }}</a>
              </td>
              <td>{{personne.get_personne_type_display}}</td>
              <td>
                {% if personne.email %}
                  {{ personne.email }}
                  {% endif %}
              </td>
              <td>
                {% if personne.gsm %}
                  {{ personne.gsm }}
                  {% endif %}
              </td>
              <td>{% if personne.telephone %}
                  {{ personne.telephone }}
                  {% endif %}
              </td>
              <td>{% if personne.profession %}
                  {{ personne.profession }}
                  {% endif %}
              </td>
              <td>{% if personne.societe %}
                  <a href="{% url 'societe_edit' personne.societe.id %}">{{ personne.societe.nom }}</a>
                  {% endif %}
              </td>
              <td>
                <a href="{% url 'personne-delete-2' personne.id %}"
                   title="Pour supprimer une personne"
                   onclick="return confirm('Sûr de vouloir supprimer?')"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a>
              </td>

          </tr>
      {% endfor%}
          </tbody>
      </table>

    </div>
</div>

{% endblock %}

{% extends "layout.html" %}
{% block breadcrumb %}
  <li class="active">Liste des personnes</li>
{% endblock %}
{% block content %}
<div class="panel panel-default">
  <div class="panel-body">
    <!-- Filtre -->
    <div>
      <form  method="get" action="{% url 'personne_search'%}" >
        <div class="row">
          <div class="col-md-4">
              <label for="nom">Nom</label>
              <input class="form-control" name="nom" value="{{ nom | default_if_none:'' }}" style="text-transform:uppercase" id="nom">
          </div>
          <div class="col-md-4">
              <label for="prenom">Prénom</label>
              <input class="form-control" name="prenom" value="{{ prenom | default_if_none:'' }}" style="text-transform:uppercase" id="prenom">
          </div>
          <div class="col-md-4">
            <label class="invisible">&nbsp;</label>
            <div class="btnbtn-as-block"><input type="submit" value="OK" name="btn">
                <input type="button" value="Clean" name="btn" id="btn_clean_personnes" style="visibility:hidden;display:none;" ></div>
          </div>
        </div>
      </form>
    </div>
    <!-- fin Filtre -->
      <table class="table table-striped table-hover">
          <thead>
              <th>Nom</th>
              <th>Prénom</th>
              <th>Email</th>
              <th>Gsm</th>
              <th>Téléphone</th>
              <th>Profession</th>
              <th>Batiment(s)</th>
          </thead>
      {% for personne in personnes %}
          <tr>
              <td>
                  {{ personne.nom }}
              </td>
              <td>
                  {{ personne.prenom }}
              </td>
              <td>
                {% if personne.email %}
                  {{ personne.email }}
                  {% endif %}
              </td>
              <td>
                {% if personne.gsm %}
                  {{ personne.gsm }}
                  {% endif %}
              </td>
              <td>{% if personne.telephone %}
                  {{ personne.telephone }}
                  {% endif %}
              </td>
              <td>{% if personne.profession %}
                  &nbsp;{{ personne.profession }}
                  {% endif %}

              </td>
              <td>
                {% if personne.batiments %}
                  <a href="{% url 'listeBatiments-filtrer-personne' personne.id %}" title="Les batiments de la personne">Batiments</a>
                    {% endif %}
              </td>

              <td>
                <a href="{% url 'personne-edit' personne.id %}" title="Pour modifier une personne"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
                <a href="{% url 'personne-delete' personne.pk %}" title="Pour supprimer une personne"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a>
              </td>

          </tr>
      {% endfor%}
      </table>
      <p align="right">
        <a href="{% url 'personne-create' %}" title="Pour ajouter une nouvelle personne"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></a>
      </p>
    </div>
</div>

{% endblock %}
